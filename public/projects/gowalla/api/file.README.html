<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Documentation by YARD 0.5.5</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: README</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>Gowalla</h1>

<p>Ruby wrapper for the <a href="http://gowalla.com/api/docs">Gowalla API</a>.</p>

<h2>Installation</h2>

<pre class="code"><span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='gowalla identifier id'>gowalla</span>
</pre>

<h2>Get your API key</h2>

<p>Be sure and get your API key: <a href="http://gowalla.com/api/keys">http://gowalla.com/api/keys</a></p>

<h2>Usage</h2>

<h3>Instantiate a client (Basic Auth)</h3>

<pre class="code"><span class='gowalla identifier id'>gowalla</span> <span class='assign token'>=</span> <span class='Gowalla constant id'>Gowalla</span><span class='colon2 op'>::</span><span class='Client constant id'>Client</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:username</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'pengwynn'</span><span class='comma token'>,</span> <span class='symbol val'>:password</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'somepassword'</span><span class='comma token'>,</span> <span class='symbol val'>:api_key</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'your_api_key'</span><span class='rparen token'>)</span>
</pre>

<h3>or configure once</h3>

<pre class="code"><span class='Gowalla constant id'>Gowalla</span><span class='dot token'>.</span><span class='configure identifier id'>configure</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='config identifier id'>config</span><span class='bitor op'>|</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='api_key identifier id'>api_key</span> <span class='assign token'>=</span> <span class='string val'>'your_api_key'</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='username identifier id'>username</span> <span class='assign token'>=</span> <span class='string val'>'pengwynn'</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='password identifier id'>password</span> <span class='assign token'>=</span> <span class='string val'>'somepassword'</span>
<span class='end end kw'>end</span>
<span class='gowalla identifier id'>gowalla</span> <span class='assign token'>=</span> <span class='Gowalla constant id'>Gowalla</span><span class='colon2 op'>::</span><span class='Client constant id'>Client</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
</pre>

<h3>Instantiate a client (OAuth2)</h3>

<p>For OAuth2, you'll need to specify a callback URL when you <a href="http://gowalla.com/api/keys">set up your app and get your API keys</a>.</p>

<p>Let's create the client in a protected method in our controller:</p>

<pre class="code"><span class='protected identifier id'>protected</span>
  <span class='def def kw'>def</span> <span class='client identifier id'>client</span>    
    <span class='Gowalla constant id'>Gowalla</span><span class='colon2 op'>::</span><span class='Client constant id'>Client</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='lparen token'>(</span>
      <span class='symbol val'>:api_key</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;your_api_key&quot;</span><span class='comma token'>,</span>
      <span class='symbol val'>:api_secret</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;your_api_secret&quot;</span><span class='comma token'>,</span>
      <span class='symbol val'>:access_token</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='session identifier id'>session</span><span class='lbrack token'>[</span><span class='symbol val'>:access_token</span><span class='rbrack token'>]</span>
    <span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
</pre>

<p>We need to get an access token. Perhaps in an a before filter where you need to access Gowalla:</p>

<pre class="code"><span class='redirect identifier id'>redirect</span><span class='lparen token'>(</span><span class='@client ivar id'>@client</span><span class='dot token'>.</span><span class='web_server identifier id'>web_server</span><span class='dot token'>.</span><span class='authorize_url identifier id'>authorize_url</span><span class='lparen token'>(</span><span class='symbol val'>:redirect_uri</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='redirect_uri identifier id'>redirect_uri</span><span class='comma token'>,</span> <span class='symbol val'>:state</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
</pre>

<p>You'll need a callback route to catch the code coming back from Gowalla after a user grants you access and this must match what you specified when you created your app on Gowalla:</p>

<pre class="code"><span class='get identifier id'>get</span> <span class='string val'>'/auth/gowalla/callback'</span> <span class='do do kw'>do</span>
  <span class='session identifier id'>session</span><span class='lbrack token'>[</span><span class='symbol val'>:access_token</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='client identifier id'>client</span><span class='dot token'>.</span><span class='web_server identifier id'>web_server</span><span class='dot token'>.</span><span class='get_access_token identifier id'>get_access_token</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:code</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:redirect_uri</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='redirect_uri identifier id'>redirect_uri</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='token identifier id'>token</span>

  <span class='if if kw'>if</span> <span class='session identifier id'>session</span><span class='lbrack token'>[</span><span class='symbol val'>:access_token</span><span class='rbrack token'>]</span>
    <span class='redirect identifier id'>redirect</span> <span class='string val'>'/auth/gowalla/test'</span>
  <span class='else else kw'>else</span>
    <span class='string val'>&quot;Error retrieving access token.&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>

<p>Now that we have an access token we can use the client to make calls, just like we would with Basic Auth. You can checkout a basic <a href="http://github.com/pengwynn/gowalla-auth">Sinatra example</a>.</p>

<h4>Examples</h4>

<pre class="code"><span class='gowalla identifier id'>gowalla</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='string val'>'pengwynn'</span><span class='rparen token'>)</span>
<span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='comment val'>#Hashie::Mash accept_url=&quot;/friendships/accept?user_id=1707&quot; activity_url=&quot;/users/1707/events&quot; bio=&quot;Web designer and Ruby developer.&quot; events_url=&quot;/users/1707/events&quot; fb_id=605681706 first_name=&quot;Wynn&quot; friends_count=27 friends_only=false friends_url=&quot;/users/1707/friends&quot; hometown=&quot;Aubrey, TX&quot; image_url=&quot;http://s3.amazonaws.com/static.gowalla.com/users/1707-standard.jpg?1262011383&quot; is_friend=false items_count=5 items_url=&quot;/users/1707/items&quot; last_name=&quot;Netherland&quot; last_visit=&lt;#Hashie::Mash comment=&quot;Closing every account I have &quot; created_at=&quot;2010/01/26 15:31:46 +0000&quot; spot=&lt;#Hashie::Mash image_url=&quot;http://static.gowalla.com/categories/186-standard.png&quot; name=&quot;Bank Of America&quot; small_image_url=&quot;http://static.gowalla.com/categories/186-small-standard.png&quot; url=&quot;/spots/164052&quot;name=&quot;Wynn Netherland&quot; pins_count=3 pins_url=&quot;/users/1707/pins&quot; reject_url=&quot;/friendships/reject?user_id=1707&quot; request_url=&quot;/friendships/request?user_id=1707&quot; stamps_count=15 stamps_url=&quot;/users/1707/stamps&quot; top_spots_url=&quot;/users/1707/top_spots&quot; twitter_username=&quot;pengwynn&quot; url=&quot;/users/1707&quot; username=&quot;pengwynn&quot; vaulted_kinds_count=0 visited_spots_count=15 website=&quot;http://wynnnetherland.com&quot;&gt;</span>
</pre>

<p>Details for the current user</p>

<pre class="code"><span class='gowalla identifier id'>gowalla</span><span class='dot token'>.</span><span class='user identifier id'>user</span>
</pre>

<p>Details for another user</p>

<pre class="code"><span class='gowalla identifier id'>gowalla</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='string val'>'bradleyjoyce'</span><span class='rparen token'>)</span>
<span class='gowalla identifier id'>gowalla</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='integer val'>1707</span><span class='rparen token'>)</span>
</pre>

<h2>Note on Patches/Pull Requests</h2>

<ul>
<li>Fork the project.</li>
<li>Make your feature addition or bug fix.</li>
<li>Add tests for it. This is important so I don't break it in a
future version unintentionally.</li>
<li>Commit, do not mess with rakefile, version, or history.
(if you want to have your own version, that is fine but
 bump version in a commit by itself I can ignore when I pull)</li>
<li>Send me a pull request. Bonus points for topic branches.</li>
</ul>


<h2>Copyright</h2>

<p>Copyright (c) 2010 Wynn Netherland. See LICENSE for details.</p>
</div></div>
    
    

<h3><a href="../" class='back-to-home'>&larr; Back to project homepage</a></h3>

<style type="text/css" media="screen">
  body {padding-top: 30px;}
  a.back-to-home {position: absolute; top: 10px; left: 10px; color: #000; text-decoration: none;}
</style>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11252985-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </body>
</html>